//CHECKSUM:d6f9e1311a8f947ee21c101035af5bf14748e99152c77ca6098b89ecf48d74d9
{"version":3,"sources":["../actions/decrement.js"],"names":["axios","require","decrement","metric","group","increment","axiosConfig","bp","http","getAxiosConfigForBot","event","botId","post","name","count","args"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;AAEA;;;;;;;;;;;;;;;;;;AAgBA,MAAMC,SAAS,GAAG,OAAOC,MAAP,EAAeC,KAAf,EAAsBC,SAAS,GAAG,CAAlC,KAAwC;AACxD,QAAMC,WAAW,GAAG,MAAMC,EAAE,CAACC,IAAH,CAAQC,oBAAR,CAA6BC,KAAK,CAACC,KAAnC,CAA1B;AACA,QAAMX,KAAK,CAACY,IAAN,CACJ,yCADI,EAEJ;AAAEC,IAAAA,IAAI,EAAG,GAAEV,MAAO,IAAGC,KAAM,EAA3B;AAA8BU,IAAAA,KAAK,EAAET;AAArC,GAFI,EAGJC,WAHI,CAAN;AAKD,CAPD;;AASA,OAAOJ,SAAS,CAACa,IAAI,CAACZ,MAAN,EAAcY,IAAI,CAACX,KAAnB,EAA0BW,IAAI,CAACD,KAA/B,CAAhB","sourceRoot":"/var/lib/jenkins/workspace/build-linux/modules/analytics/src/backend","sourcesContent":["const axios = require('axios')\n\n/**\n * Decrements the value of a specific metric group.\n *\n * The group (optional) is useful when you need to compute a graph taking into account multiple variables.\n * For example, you could count the gender ratio by incrementing:\n *\n * Male -> `metric = gender` and `group = male`\n *\n * Female -> `metric = gender` and `group = female`\n *\n * @title Decrement Metric\n * @category Analytics\n * @param {string} metric The name of the metric\n * @param {string} [group=all] Optional group inside the metrics\n * @param {Number} [increment=1] The optional increment of the metric\n */\nconst decrement = async (metric, group, increment = 1) => {\n  const axiosConfig = await bp.http.getAxiosConfigForBot(event.botId)\n  await axios.post(\n    '/mod/analytics/custom_metrics/decrement',\n    { name: `${metric}~${group}`, count: increment },\n    axiosConfig\n  )\n}\n\nreturn decrement(args.metric, args.group, args.count)\n"]}