//CHECKSUM:e49178ae39b4c989057d7c7c19ef367d0421d18e5d7f4ede0ba53b2509687801
{"version":3,"sources":["../actions/setVariable.js"],"names":["setVariable","type","name","value","original","bp","kvs","get","event","botId","set","state","args"],"mappings":";;AAAA;;;;;;;;;;;AAWA,MAAMA,WAAW,GAAG,OAAOC,IAAP,EAAaC,IAAb,EAAmBC,KAAnB,KAA6B;AAC/C,MAAIF,IAAI,KAAK,KAAb,EAAoB;AAClB,UAAMG,QAAQ,GAAG,MAAMC,EAAE,CAACC,GAAH,CAAOC,GAAP,CAAWC,KAAK,CAACC,KAAjB,EAAwB,QAAxB,CAAvB;AACA,UAAMJ,EAAE,CAACC,GAAH,CAAOI,GAAP,CAAWF,KAAK,CAACC,KAAjB,EAAwB,QAAxB,EAAkC,EAAE,GAAGL,QAAL;AAAe,OAACF,IAAD,GAAQC;AAAvB,KAAlC,CAAN;AACD,GAHD,MAGO,IAAIA,KAAK,KAAK,MAAV,IAAoBA,KAAK,KAAK,EAA9B,IAAoC,OAAOA,KAAP,KAAiB,WAAzD,EAAsE;AAC3E,WAAOK,KAAK,CAACG,KAAN,CAAYV,IAAZ,EAAkBC,IAAlB,CAAP;AACD,GAFM,MAEA;AACLM,IAAAA,KAAK,CAACG,KAAN,CAAYV,IAAZ,EAAkBC,IAAlB,IAA0BC,KAA1B;AACD;AACF,CATD;;AAWA,OAAOH,WAAW,CAACY,IAAI,CAACX,IAAN,EAAYW,IAAI,CAACV,IAAjB,EAAuBU,IAAI,CAACT,KAA5B,CAAlB","sourceRoot":"/var/lib/jenkins/workspace/build-linux/modules/builtin/src/backend","sourcesContent":["/**\n * Store data to desired storage based on the time to live expectation. Read the\n * documentation for more details\n *\n * @title Set Variable\n * @category Storage\n * @author Botpress, Inc.\n * @param {string} type - Pick between: user, session, temp, bot\n * @param {string} name - The name of the variable\n * @param {any} value - Set the value of the variable. Type 'null' or leave empty to erase it.\n */\nconst setVariable = async (type, name, value) => {\n  if (type === 'bot') {\n    const original = await bp.kvs.get(event.botId, 'global')\n    await bp.kvs.set(event.botId, 'global', { ...original, [name]: value })\n  } else if (value === 'null' || value === '' || typeof value === 'undefined') {\n    delete event.state[type][name]\n  } else {\n    event.state[type][name] = value\n  }\n}\n\nreturn setVariable(args.type, args.name, args.value)\n"]}