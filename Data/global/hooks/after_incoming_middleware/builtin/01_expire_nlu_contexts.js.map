//CHECKSUM:5e6c3677d8b9bae6ead95e7f5c24f2d5344fb294e508fa2beef1ec7c4e39f35c
{"version":3,"sources":["../hooks/after_incoming_middleware/01_expire_nlu_contexts.js"],"names":["event","state","session","nluContexts","nlu","errored","forEach","x","ttl","filter"],"mappings":";;AAAA,IAAIA,KAAK,CAACC,KAAN,IAAeD,KAAK,CAACC,KAAN,CAAYC,OAA3B,IAAsCF,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,WAA9D,EAA2E;AACzE,MAAIH,KAAK,CAACI,GAAN,IAAa,CAACJ,KAAK,CAACI,GAAN,CAAUC,OAA5B,EAAqC;AACnCL,IAAAA,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,WAApB,CAAgCG,OAAhC,CAAwCC,CAAC,IAAI,EAAEA,CAAC,CAACC,GAAjD,EADmC,CAEnC;;AACAR,IAAAA,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,WAApB,GAAkCH,KAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoBC,WAApB,CAAgCM,MAAhC,CAAuCF,CAAC,IAAIA,CAAC,CAACC,GAAF,GAAQ,CAApD,CAAlC;AACD;AACF","sourceRoot":"/var/lib/jenkins/workspace/build-linux/modules/builtin/src/backend","sourcesContent":["if (event.state && event.state.session && event.state.session.nluContexts) {\n  if (event.nlu && !event.nlu.errored) {\n    event.state.session.nluContexts.forEach(x => --x.ttl)\n    // Remove contexts that have expired\n    event.state.session.nluContexts = event.state.session.nluContexts.filter(x => x.ttl > 0)\n  }\n}\n"]}